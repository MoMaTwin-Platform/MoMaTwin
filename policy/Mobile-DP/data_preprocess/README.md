
## å¿«é€Ÿå¼€å§‹

### 1. æ•°æ®é¢„å¤„ç† (`data_process.py`)

#### åŸºæœ¬ä½¿ç”¨æ–¹å¼

```bash
# ä½¿ç”¨é»˜è®¤å‚æ•°å¤„ç†æ•°æ®
python data_process.py

# æŒ‡å®šè¾“å…¥æ•°æ®é›†è·¯å¾„
python data_process.py --dataset_paths /path/to/dataset1 /path/to/dataset2
# NOTE: å½“å‰ä¸ºäº†æ–¹ä¾¿ï¼Œå¤§å®¶ç›´æ¥åœ¨ä»£ç ä¸­å†™æ­»è‡ªå·±éœ€è¦å¤„ç†çš„åŸå§‹æ•°æ®è·¯å¾„å³å¯

# æŒ‡å®šè¾“å‡ºç›®å½•
python data_process.py --output_dir ./processed_data
# NOTEï¼šé»˜è®¤æ”¾åœ¨ ./processed_data
```

#### é«˜çº§å‚æ•°é…ç½®

```bash
# å¯ç”¨é€Ÿåº¦è¿‡æ»¤ï¼ˆè¿‡æ»¤å¼‚å¸¸é«˜é€Ÿè½¨è¿¹ï¼Œæå¤§æ¦‚ç‡æ˜¯è½¨è¿¹ä¸­é—´å¼‚å¸¸æ•´ä½“è·³å˜ï¼‰
python data_process.py --enable_velocity_filtering \
    --linear_speed_threshold 0.3 \
    --angular_speed_threshold 0.3

# è°ƒæ•´æ•°æ®å¤„ç†å‚æ•°
python data_process.py \
    --outlier_threshold 2.0 \
    --jump_threshold 0.2 \
    --smooth_iterations 5 \
    --strong_smooth

# å®Œæ•´å‚æ•°ç¤ºä¾‹
python data_process.py \
    --dataset_paths /data/robot1 /data/robot2 \
    --output_dir ./processed_data \
    --enable_velocity_filtering \
    --linear_speed_threshold 0.4 \
    --angular_speed_threshold 0.5 \
    --outlier_threshold 2.5 \
    --jump_threshold 0.3 \
    --smooth_iterations 3 \
    --strong_smooth
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--dataset_paths` | å†…ç½®é»˜è®¤è·¯å¾„ | è¾“å…¥æ•°æ®é›†è·¯å¾„åˆ—è¡¨ |
| `--output_dir` | `./processed_data_filtered` | è¾“å‡ºç›®å½• |
| `--enable_velocity_filtering` | False | å¯ç”¨å¼‚å¸¸é€Ÿåº¦è¿‡æ»¤ |
| `--linear_speed_threshold` | 0.3 | çº¿æ€§é€Ÿåº¦è¿‡æ»¤é˜ˆå€¼ (m/s) |
| `--angular_speed_threshold` | 0.3 | è§’é€Ÿåº¦è¿‡æ»¤é˜ˆå€¼ (rad/s) |
| `--outlier_threshold` | 3.0 | å¼‚å¸¸å€¼æ£€æµ‹é˜ˆå€¼ (Ïƒå€æ•°) |
| `--jump_threshold` | 0.3 | è·³å˜æ£€æµ‹é˜ˆå€¼ (ç±³) |
| `--smooth_iterations` | 3 | å¹³æ»‘è¿­ä»£æ¬¡æ•° |
| `--strong_smooth` | False | å¯ç”¨å¼ºå¹³æ»‘æ¨¡å¼ |

### 2. æ•°æ®ç»Ÿè®¡åˆ†æ (`data_analysis.py`)

#### åŸºæœ¬ä½¿ç”¨æ–¹å¼

```bash
# åˆ†æé»˜è®¤å¤„ç†æ•°æ®ç›®å½•
python data_analysis.py

# æŒ‡å®šå¤„ç†æ•°æ®ç›®å½•å’Œè¾“å‡ºç›®å½•
python data_analysis.py \
    --processed_data_dir ./processed_data \
    --output_dir ./analysis_results

# è°ƒæ•´ç›´æ–¹å›¾å‚æ•°
python data_analysis.py \
    --processed_data_dir ./processed_data \
    --output_dir ./analysis_results \
    --bins 100
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--processed_data_dir` | `./processed_data` | å¤„ç†åæ•°æ®ç›®å½• |
| `--output_dir` | `./analysis_results` | åˆ†æç»“æœè¾“å‡ºç›®å½• |
| `--bins` | 50 | ç›´æ–¹å›¾binæ•°é‡ |

## è¯¦ç»†åŠŸèƒ½ä»‹ç»

### æ•°æ®é¢„å¤„ç†åŠŸèƒ½ (`data_process.py`)

#### ğŸ”§ æ•°æ®å¤„ç†æµç¨‹

1. **è§’åº¦å±•å¼€å¤„ç†**ï¼š
   - ä½¿ç”¨ `np.unwrap()` å¤„ç†è§’åº¦è·³å˜
   - å°† `[-Ï€, Ï€]` èŒƒå›´æ‰©å±•ä¸ºè¿ç»­è§’åº¦
   - é¿å…è§’åº¦è·³å˜å¯¹åç»­å¤„ç†çš„å½±å“

2. **å¤šå±‚æ•°æ®æ¸…æ´—**ï¼š
   - **è·³å˜æ£€æµ‹**ï¼šä½¿ç”¨æ»‘åŠ¨çª—å£æ£€æµ‹çªç„¶ä½ç½®è·³è·ƒ
   - **ä¸‰å±‚æ»¤æ³¢å¹³æ»‘**ï¼š
     - ä¸­å€¼æ»¤æ³¢å»é™¤å°–å³°å™ªå£°
     - é«˜æ–¯æ»¤æ³¢å¼ºåŠ›å¹³æ»‘ï¼ˆå¯é€‰ï¼‰
     - Savitzky-Golayæ»¤æ³¢ç²¾ç»†è°ƒæ•´

3. **é€Ÿåº¦è®¡ç®—**ï¼š
   - è®¡ç®—æœ¬ä½“åæ ‡ç³»ä¸‹çš„é€Ÿåº¦åˆ†è§£ï¼š`[vx, vy, vyaw]`
   - `vx`ï¼šå‰è¿›é€Ÿåº¦ï¼Œ`vy`ï¼šä¾§å‘é€Ÿåº¦ï¼Œ`vyaw`ï¼šè§’é€Ÿåº¦
   - ä½¿ç”¨20Hzé‡‡æ ·é¢‘ç‡è®¡ç®—

4. **å¼‚å¸¸é€Ÿåº¦è¿‡æ»¤**ï¼ˆå¯é€‰ï¼‰ï¼š
   - æ£€æµ‹è¶…è¿‡é˜ˆå€¼çš„å¼‚å¸¸é«˜é€Ÿè½¨è¿¹
   - é»˜è®¤é˜ˆå€¼ï¼šçº¿æ€§é€Ÿåº¦ 0.3 m/sï¼Œè§’é€Ÿåº¦ 0.3 rad/s
   - ç”Ÿæˆè¯¦ç»†çš„è¿‡æ»¤æŠ¥å‘Š

#### ğŸ“Š è¾“å‡ºå†…å®¹

æ¯ä¸ªå¤„ç†çš„è½¨è¿¹åŒ…å«ï¼š

- **å¤„ç†åçš„JSONæ–‡ä»¶**ï¼š
  - å¹³æ»‘åçš„ `car_pose` æ•°æ®
  - è®¡ç®—å¾—åˆ°çš„ `velocity_decomposed` æ•°æ®
  - æŒ‡ä»¤ä¿¡æ¯ `instruction` å’Œ `distribute_instruction`

- **å¯è§†åŒ–å›¾ç‰‡** (`trajectory.png`)ï¼š
  - Plot 1ï¼šåŸå§‹è½¨è¿¹ vs å¹³æ»‘è½¨è¿¹
  - Plot 2ï¼šå¹³æ»‘è½¨è¿¹ vs é€Ÿåº¦ç§¯åˆ†é‡å»ºè½¨è¿¹ï¼ˆå«è§’åº¦ç®­å¤´ï¼‰
  - Plot 3ï¼šé€Ÿåº¦æ›²çº¿ (vx, vy, vyaw)
  - Plot 4ï¼šä½å§¿æ›²çº¿å¯¹æ¯” (x, y, angle)

- **è½¯è¿æ¥æ–‡ä»¶**ï¼š
  - è§†é¢‘æ–‡ä»¶ï¼š`leftImg.mp4`, `rightImg.mp4`, `faceImg.mp4`
  - é…ç½®æ–‡ä»¶ï¼š`diversity.json`
  - æ•°æ®é›†çº§åˆ«æ–‡ä»¶ï¼šPDFæŠ¥å‘Šã€recordæ–‡ä»¶å¤¹ã€report.json

- **è¿‡æ»¤æŠ¥å‘Š**ï¼ˆå¯ç”¨è¿‡æ»¤æ—¶ï¼‰ï¼š
  - `filter_report.json`ï¼šè¯¦ç»†çš„è¿‡æ»¤ç»Ÿè®¡
  - `filter_report.txt`ï¼šè¿‡æ»¤æŠ¥å‘Š

### æ•°æ®ç»Ÿè®¡åˆ†æåŠŸèƒ½ (`data_analysis.py`)

#### ğŸ“ˆ åˆ†æåŠŸèƒ½

1. **å…¨å±€ç»Ÿè®¡**ï¼š
   - Car poseç»Ÿè®¡ï¼šä½ç½® (x, y) å’Œè§’åº¦çš„æœ€å¤§å€¼ã€æœ€å°å€¼ã€å¹³å‡å€¼ã€æ ‡å‡†å·®
   - Velocityç»Ÿè®¡ï¼šé€Ÿåº¦åˆ†é‡ (vx, vy, vyaw) çš„ç»Ÿè®¡ä¿¡æ¯
   - è½¨è¿¹æ•°é‡å’Œå¸§æ•°ç»Ÿè®¡

2. **æ•°æ®åˆ†å¸ƒåˆ†æ**ï¼š
   - **é€Ÿåº¦åˆ†å¸ƒç™¾åˆ†æ¯”**ï¼š
     - é™æ­¢/ä½é€Ÿ/ä¸­é€Ÿ/é«˜é€Ÿ/å¼‚å¸¸é«˜é€Ÿçš„å æ¯”
     - æ­£å‘/è´Ÿå‘è¿åŠ¨å æ¯”
     - å¼‚å¸¸å€¼å æ¯”ï¼ˆÂ±3Ïƒï¼‰
   - **ä½ç½®åˆ†å¸ƒç™¾åˆ†æ¯”**ï¼š
     - ä¸åŒè·ç¦»èŒƒå›´çš„å æ¯”
     - è§’åº¦è±¡é™åˆ†å¸ƒ
   - **é€Ÿåº¦å¹…å€¼åˆ†æ**ï¼š`speed_magnitude = âˆš(vxÂ² + vyÂ²)`

3. **å¼‚å¸¸é«˜é€Ÿæ£€æµ‹**ï¼š
   - æ£€æµ‹è¶…è¿‡ 0.5 m/s (çº¿æ€§) å’Œ 0.6 rad/s (è§’é€Ÿåº¦) çš„å¼‚å¸¸æƒ…å†µ
   - ç»Ÿè®¡å¼‚å¸¸è½¨è¿¹æ•°é‡å’Œå æ¯”
   - æä¾›è¯¦ç»†çš„å¼‚å¸¸è½¨è¿¹ä¿¡æ¯

#### ğŸ“Š è¾“å‡ºå†…å®¹

- **ç»Ÿè®¡æŠ¥å‘Š**ï¼š
  - `statistics_report.json`ï¼šå®Œæ•´çš„ç»Ÿè®¡æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰
  - `statistics_report.txt`ï¼šç»Ÿè®¡æŠ¥å‘Š

- **å¯è§†åŒ–å›¾è¡¨**ï¼š
  - `velocity_distribution_histograms.png`ï¼šé€Ÿåº¦åˆ†å¸ƒç›´æ–¹å›¾
  - `car_pose_distribution_analysis.png`ï¼šä½å§¿åˆ†å¸ƒåˆ†æå›¾
